(this.webpackJsonpauthvk=this.webpackJsonpauthvk||[]).push([[0],{20:function(e,t,n){e.exports=n(39)},25:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(14),c=n.n(s),i=n(17),u=(n(25),n(4)),o=n(5),l=n(6),d=n(19),m=n(18),f=n(9),h=n.n(f),g=n(2),p=n.n(g),v=n(7),w=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"getFriends",value:function(){var e=Object(v.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.VK.Api.call("friends.get",{fields:"username",count:t,v:"5.112"},n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.VK.Auth.login(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(v.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.VK.Auth.logout();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E=(n(31),function(e){var t=e.user,n=e.userFriends;return r.a.createElement("div",{className:"user-card"},r.a.createElement("div",{className:"user-card__name"},t.first_name," ",t.last_name),0!==n.length&&r.a.createElement("div",{className:"user-card__friends"},r.a.createElement("div",{className:"user-card__friends-title"},"Your friends"),n.map((function(e){var t=e.id,n=e.first_name,a=e.last_name;return r.a.createElement("div",{key:t,className:"user-card__friend"},n," ",a)}))))}),k=(n(32),function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(o.a)(this,n),a=t.call(this,e);var r=JSON.parse(localStorage.getItem("user"))||{};return a.state={account:{pending:!1,success:!0,userInfo:r},userFriends:{pending:!1,success:!0,data:[]},isAuth:0!==Object.keys(r).length},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.state.isAuth&&this.getFriends()}},{key:"getFriends",value:function(){var e=this;this.setState((function(e){return{userFriends:Object(u.a)(Object(u.a)({},e.userFriends),{},{pending:!0})}})),w.getFriends(5,(function(t){t.error?e.setState({userFriends:{pending:!1,success:!1,data:[]}}):e.setState({userFriends:{pending:!1,success:!0,data:t.response.items}})}))}},{key:"login",value:function(){var e=this;this.setState((function(e){return{account:Object(u.a)(Object(u.a)({},e.account),{},{pending:!0})}})),w.login((function(t){t.session?(e.setState({account:{pending:!1,success:!0,userInfo:t.session.user},isAuth:!0},e.getFriends),localStorage.setItem("user",JSON.stringify(t.session.user))):e.setState({account:{success:!1,pending:!1,userInfo:{}}})}))}},{key:"logout",value:function(){window.VK.Auth.logout(),localStorage.removeItem("user"),this.setState({account:{pending:!1,success:!0,userInfo:{}},userFriends:{pending:!1,success:!0,data:[]},isAuth:!1})}},{key:"render",value:function(){var e=this.state,t=e.account,n=e.userFriends,a=e.isAuth;return r.a.createElement("div",{className:"app"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{className:"logo",viewBox:"0 0 512 512",onClick:this.logout.bind(this)},r.a.createElement("path",{d:"M255.15,468.625H63.787c-11.737,0-21.262-9.526-21.262-21.262V64.638c0-11.737,9.526-21.262,21.262-21.262H255.15 c11.758,0,21.262-9.504,21.262-21.262S266.908,0.85,255.15,0.85H63.787C28.619,0.85,0,29.47,0,64.638v382.724 c0,35.168,28.619,63.787,63.787,63.787H255.15c11.758,0,21.262-9.504,21.262-21.262 C276.412,478.129,266.908,468.625,255.15,468.625z"}),r.a.createElement("path",{d:"M505.664,240.861L376.388,113.286c-8.335-8.25-21.815-8.143-30.065,0.213s-8.165,21.815,0.213,30.065l92.385,91.173 H191.362c-11.758,0-21.262,9.504-21.262,21.262c0,11.758,9.504,21.263,21.262,21.263h247.559l-92.385,91.173 c-8.377,8.25-8.441,21.709-0.213,30.065c4.167,4.21,9.653,6.336,15.139,6.336c5.401,0,10.801-2.041,14.926-6.124l129.276-127.575 c4.04-3.997,6.336-9.441,6.336-15.139C512,250.302,509.725,244.88,505.664,240.861z"})),r.a.createElement(E,{user:t.userInfo,userFriends:n.data}),!n.pending&&!n.success&&r.a.createElement("div",{className:"error-text"},"Error while getting friend list"),n.pending&&r.a.createElement(h.a,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{className:"logo",viewBox:"0 0 511.962 511.962",onClick:this.login.bind(this)},r.a.createElement("path",{d:"M250.503,400.807h30.592c0,0,9.248-1.024,13.952-6.112c4.352-4.672,4.192-13.44,4.192-13.44 s-0.608-41.056,18.464-47.104c18.784-5.952,42.912,39.68,68.48,57.248c19.328,13.28,34.016,10.368,34.016,10.368l68.384-0.96 c0,0,35.776-2.208,18.816-30.336c-1.376-2.304-9.888-20.8-50.848-58.816c-42.88-39.808-37.12-33.344,14.528-102.176 c31.456-41.92,44.032-67.52,40.096-78.464c-3.744-10.432-26.88-7.68-26.88-7.68l-76.928,0.448c0,0-5.696-0.768-9.952,1.76 c-4.128,2.496-6.784,8.256-6.784,8.256s-12.192,32.448-28.448,60.032c-34.272,58.208-48,61.28-53.6,57.664 c-13.024-8.416-9.76-33.856-9.76-51.904c0-56.416,8.544-79.936-16.672-86.016c-8.384-2.016-14.528-3.36-35.936-3.584 c-27.456-0.288-50.72,0.096-63.872,6.528c-8.768,4.288-15.52,13.856-11.392,14.4c5.088,0.672,16.608,3.104,22.72,11.424 c7.904,10.72,7.616,34.848,7.616,34.848s4.544,66.4-10.592,74.656c-10.4,5.664-24.64-5.888-55.2-58.72 c-15.648-27.04-27.488-56.96-27.488-56.96s-2.272-5.568-6.336-8.544c-4.928-3.616-11.84-4.768-11.84-4.768l-73.152,0.448 c0,0-10.976,0.32-15.008,5.088c-3.584,4.256-0.288,13.024-0.288,13.024s57.28,133.984,122.112,201.536 C182.983,404.871,250.503,400.807,250.503,400.807L250.503,400.807z"})),!t.pending&&!t.success&&r.a.createElement("div",{className:"error-text"},"Error while auth"),t.pending&&r.a.createElement(h.a,null)))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(k,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.e4e2f55d.chunk.js.map